1
00:00:00,120 --> 00:00:05,780
大型语言模型决定调用函数的过程可能显得有点神秘

2
00:00:05,780 --> 00:00:11,110
最初因为语言模型只是被训练生成输出文本或文本标记

3
00:00:11,110 --> 00:00:13,210
那么这个过程在这个视频中是如何运作的

4
00:00:13,210 --> 00:00:15,670
我想一步步带你们了解

5
00:00:15,670 --> 00:00:21,090
让机械臂能够调用函数的过程到底是什么样子的

6
00:00:21,090 --> 00:00:22,090
让我们先看看

7
00:00:22,090 --> 00:00:25,400
工具其实就是代码或函数

8
00:00:25,400 --> 00:00:28,260
然后一个元素可以像这样请求执行

9
00:00:28,260 --> 00:00:31,650
我们之前视频中看到的获取当前时间函数

10
00:00:32,270 --> 00:00:36,110
当今领先的模型都是直接训练使用工具的

11
00:00:36,110 --> 00:00:37,870
但我想带你们了解

12
00:00:37,870 --> 00:00:40,190
如果需要自己编写

13
00:00:40,190 --> 00:00:43,640
提示指令来告诉它何时使用工具

14
00:00:43,640 --> 00:00:46,520
这就是我们早期需要做的事情

15
00:00:46,520 --> 00:00:49,020
在模型直接训练使用工具之前

16
00:00:49,020 --> 00:00:51,740
尽管我们现在不再完全这样操作

17
00:00:51,740 --> 00:00:54,520
这能帮助你更好地理解整个过程

18
00:00:54,520 --> 00:00:57,640
接下来视频会讲解更现代的语法

19
00:00:57,640 --> 00:01:00,599
如果你已经实现了获取当前时间的函数

20
00:01:00,599 --> 00:01:03,359
为了将这个工具提供给语言模型

21
00:01:03,359 --> 00:01:05,470
你可能会写出这样的提示

22
00:01:05,470 --> 00:01:09,970
你告诉模型：你有一个名为获取当前时间的工具可以使用

23
00:01:09,970 --> 00:01:12,330
请输出以下文本

24
00:01:12,330 --> 00:01:14,000
打印全部大写函数

25
00:01:14,000 --> 00:01:15,620
然后打印获取当前时间

26
00:01:15,620 --> 00:01:19,080
如果我看到这段全部大写函数和获取当前时间

27
00:01:19,080 --> 00:01:23,190
这就表明你需要调用获取当前时间函数

28
00:01:23,190 --> 00:01:25,430
当用户询问时间时

29
00:01:25,430 --> 00:01:29,870
模型将意识到需要调用获取当前时间的请求

30
00:01:29,870 --> 00:01:34,060
因此模型会输出被指示的全部大写函数

31
00:01:34,060 --> 00:01:36,060
现在调用获取当前时间

32
00:01:36,060 --> 00:01:40,090
我不需要编写代码检查模型输出

33
00:01:40,090 --> 00:01:42,490
查看是否存在全部大写函数

34
00:01:42,490 --> 00:01:46,380
如果存在则需要提取参数

35
00:01:46,380 --> 00:01:49,240
通过获取当前时间确定要调用的函数

36
00:01:49,240 --> 00:01:53,830
然后需要编写代码实际调用该函数

37
00:01:53,830 --> 00:01:55,410
并提取输出结果

38
00:01:55,410 --> 00:01:57,650
例如输出为八点

39
00:01:57,650 --> 00:02:00,050
这属于开发者编写的代码

40
00:02:00,050 --> 00:02:03,709
我的代码需要将八点时间处理

41
00:02:03,709 --> 00:02:07,360
将八点返回给模型作为计算历史的一部分

42
00:02:07,360 --> 00:02:08,360
并记录对话历史

43
00:02:08,360 --> 00:02:10,520
当然包括初始提示内容

44
00:02:10,520 --> 00:02:13,120
函数调用请求等信息

45
00:02:13,120 --> 00:02:16,910
最后需要知道之前发生了什么

46
00:02:16,910 --> 00:02:18,630
你是否提出了这个问题

47
00:02:18,630 --> 00:02:19,670
请求函数调用

48
00:02:19,670 --> 00:02:23,110
然后调用函数并返回八点

49
00:02:23,110 --> 00:02:27,030
最后可以综合所有信息生成最终回复

50
00:02:27,030 --> 00:02:29,550
因此现在时间是八点，明确说明

51
00:02:29,550 --> 00:02:31,620
为了调用一个函数

52
00:02:31,620 --> 00:02:34,320
语言模型不会直接调用函数

53
00:02:34,320 --> 00:02:35,040
相反

54
00:02:35,040 --> 00:02:37,440
输出特定格式的内容

55
00:02:37,440 --> 00:02:41,240
比如这样来告诉我需要调用该函数

56
00:02:41,240 --> 00:02:45,240
然后告知函数的输出结果是什么

57
00:02:45,240 --> 00:02:49,310
在这个例子中我们只提供了一个函数

58
00:02:49,310 --> 00:02:52,350
但可以想象如果提供三个或四个函数

59
00:02:52,350 --> 00:02:55,300
可以让它输出全大写的函数名称

60
00:02:55,300 --> 00:02:57,329
然后是被调用的函数名称

61
00:02:57,329 --> 00:03:00,389
甚至可能包含这些函数的参数

62
00:03:00,389 --> 00:03:03,449
实际上现在让我们看一个稍微复杂一点的例子

63
00:03:03,449 --> 00:03:08,430
获取当前时间函数接受时区参数

64
00:03:08,430 --> 00:03:10,250
以获取所需时区的当前时间

65
00:03:10,250 --> 00:03:11,570
在第二个例子中

66
00:03:11,570 --> 00:03:16,999
我编写了一个获取指定时区当前时间的函数

67
00:03:16,999 --> 00:03:22,190
此处时区是传递给获取当前时间函数的输入参数

68
00:03:22,190 --> 00:03:25,070
为了让模型使用此工具回答问题

69
00:03:25,070 --> 00:03:27,490
比如新西兰现在几点

70
00:03:27,490 --> 00:03:28,570
因为我的答案在那里

71
00:03:28,570 --> 00:03:29,890
所以如果查询

72
00:03:29,890 --> 00:03:31,950
我会查找新西兰当前时间

73
00:03:31,950 --> 00:03:33,640
为了让模型使用此工具

74
00:03:33,640 --> 00:03:36,150
你可能需要修改系统提示

75
00:03:36,150 --> 00:03:39,170
你可以使用获取当前时间工具指定时区

76
00:03:39,170 --> 00:03:41,940
使用时需输出以下内容获取当前时间

77
00:03:41,940 --> 00:03:43,800
然后包含时区信息

78
00:03:43,800 --> 00:03:45,380
这是一个简化的提示

79
00:03:45,380 --> 00:03:45,780
实际上

80
00:03:45,780 --> 00:03:49,609
你可能需要在提示中添加更多细节

81
00:03:49,609 --> 00:03:50,849
说明函数使用方法等

82
00:03:50,849 --> 00:03:51,709
在这个例子中

83
00:03:51,709 --> 00:03:55,850
模型将意识到需要获取新西兰时间

84
00:03:55,850 --> 00:03:58,570
因此会生成输出

85
00:03:58,570 --> 00:04:01,140
例如函数：获取当前时间

86
00:04:01,140 --> 00:04:02,500
太平洋/奥克兰

87
00:04:02,500 --> 00:04:04,220
这是新西兰时区

88
00:04:04,220 --> 00:04:06,620
因为奥克兰是新西兰主要城市

89
00:04:06,620 --> 00:04:10,990
然后我需要编写代码检查

90
00:04:10,990 --> 00:04:13,310
输出中是否全大写出现函数

91
00:04:13,310 --> 00:04:17,599
如果出现则提取需要调用的函数

92
00:04:17,599 --> 00:04:20,860
随后调用带有指定参数的获取当前时间

93
00:04:20,860 --> 00:04:22,220
该参数由模型生成

94
00:04:22,220 --> 00:04:25,420
可能是奥克兰并返回凌晨四点

95
00:04:25,420 --> 00:04:26,000
然后像往常一样

96
00:04:26,000 --> 00:04:28,640
将结果输入模型并处理

97
00:04:28,640 --> 00:04:31,580
总结为新西兰现在四点

98
00:04:31,580 --> 00:04:34,830
以下是让模型使用工具的流程

99
00:04:34,830 --> 00:04:37,210
必须向模型提供这两部分

100
00:04:37,210 --> 00:04:38,150
实现该函数

101
00:04:38,150 --> 00:04:40,750
然后告诉lm该功能可用

102
00:04:40,750 --> 00:04:42,630
当机械臂决定调用它时

103
00:04:42,630 --> 00:04:48,050
生成特定输出提示你需要调用该函数

104
00:04:48,050 --> 00:04:48,900
对于机械臂

105
00:04:48,900 --> 00:04:50,140
你需要调用该函数

106
00:04:50,140 --> 00:04:51,340
获取此输出

107
00:04:51,340 --> 00:04:55,900
将刚调用的函数输出取回并返回给lm和机械臂

108
00:04:55,900 --> 00:04:59,200
然后利用该输出继续执行下一步操作

109
00:04:59,200 --> 00:05:03,260
在本视频示例中则是生成最终输出

110
00:05:03,260 --> 00:05:08,289
但有时你甚至可能决定下一步再调用另一个工具

111
00:05:09,180 --> 00:05:12,520
现在这种全大写函数语法

112
00:05:12,520 --> 00:05:13,740
显得有点笨拙

113
00:05:13,740 --> 00:05:17,140
这是我们过去在elm未原生训练前的做法

114
00:05:17,140 --> 00:05:20,350
或让模型自行知晓如何请求工具

115
00:05:20,350 --> 00:05:22,260
符合现代规范

116
00:05:22,260 --> 00:05:25,640
无需告知它输出所有猫函数

117
00:05:25,640 --> 00:05:27,880
然后搜索所有猫函数等

118
00:05:27,880 --> 00:05:32,550
而是训练使用特定语法明确请求

119
00:05:32,550 --> 00:05:33,610
当需要调用工具时

120
00:05:33,610 --> 00:05:35,420
在下一视频中讲解

121
00:05:35,420 --> 00:05:39,340
我想与你分享现代语法的实际形式

122
00:05:39,340 --> 00:05:42,330
让elm的工具请求被调用

123
00:05:42,330 --> 00:05:44,450
我们进入下一视频

